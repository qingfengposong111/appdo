{"version":3,"sources":["webpack:///./src/pages/Buy.vue?7ef4","webpack:///src/pages/Buy.vue","webpack:///./src/pages/Buy.vue?90ef","webpack:///./src/pages/Buy.vue","webpack:///./src/pages/Buy.vue?f655"],"names":["module","exports","__webpack_require__","push","i","Buy","data","time","APNumber","cash","count","h","m","flag","d","safePwd","endTime","filters","yuan","value","isNaN","parseFloat","toFixed","computed","methods","goBack","this","$router","go","num","n","getAP","tostUtil","tostTop","buy","_this","that","util","ajax","post","number","Number","then","res1","message","catch","err","submit","password","res","status","$bus","$emit","created","_this2","remain","activeTime","JSON","parse","localStorage","loginInfo","activationTime","Date","getTime","Math","floor","dd","toString","split","length","start","type","arr","arr1","end","forEach","item","index","payTime","pages_Buy","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","slot","icon","on","click","_v","staticStyle","width","height","text-align","padding-left","font-size","_s","margin-left","_m","directives","name","rawName","expression","modifiers","trim","placeholder","domProps","input","$event","target","composing","blur","$forceUpdate","_f","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","content","locals"],"mappings":"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","file":"static/js/78.13b61144c9ec61aabb07.js","sourcesContent":["exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".self>span[data-v-0089b866]:first-child{margin-right:10px}.self>span[data-v-0089b866]:nth-child(3){margin-left:10px}.itself>span[data-v-0089b866]:nth-child(2){margin:0 65px}.header[data-v-0089b866]{background:#5d0e13;height:50px!important;font-size:18px!important}.top-flex-time[data-v-0089b866]{width:100%;padding:10px 7%;background:#5d0e13;border-top:1px solid #5d0e13;color:#fff;height:200px;position:relative;-webkit-box-sizing:border-box;box-sizing:border-box}.two-self[data-v-0089b866]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;margin-top:10px;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.two-self>div[data-v-0089b866]:first-child{border-right:1px solid #fff}.two-self p[data-v-0089b866]{text-align:center}.two-self>div[data-v-0089b866]{width:50%;height:50px}.flex-justify-center[data-v-0089b866]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.width-flex-this[data-v-0089b866]{width:34%;margin-bottom:20px}.font13[data-v-0089b866]{font-size:14px!important}.time-abs-flex[data-v-0089b866]{position:relative}.font30[data-v-0089b866]{font-size:30px;padding-left:10%}.column[data-v-0089b866]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.self>div[data-v-0089b866]{width:130px}.row[data-v-0089b866]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}div.self_bottom>div[data-v-0089b866]:first-child{margin-left:5px}input[data-v-0089b866]{width:100%;color:#000;font-size:13px;-webkit-appearance:none;background:transparent;border:none;outline:none}.elish-flex-view[data-v-0089b866]{margin-right:36px}.top-fixed-flex[data-v-0089b866]{width:86%;padding:10px 7%;background:#fff;color:#333;border-bottom:1px solid #f7f7f7}.padding-top-view[data-v-0089b866]{padding-top:10px}.main-content-class[data-v-0089b866]{width:86%;padding:7px 7%;background:#fff;height:auto;position:relative;padding-bottom:17px;border-bottom:1px solid #e7e7e7}.flex-box-center[data-v-0089b866]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.btn-last-view[data-v-0089b866]{width:86%;padding:10px 7%}.btn-save-flex[data-v-0089b866]{width:100%;background:#5d0e13;color:#ecc489;text-align:center;padding:7px 0;border-radius:5px}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0089b866\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/Buy.vue\n// module id = IVDQ\n// module chunks = 78","<template>\n  <div>\n    <!--<div style=\"width: 100%;height: 20px;background: #5D0E13;position:fixed;top:0;left:0;z-index:999998!important;\"></div>-->\n    <mt-header title=\"承租AP\" class=\"header\">\n      <mt-button @click=\"goBack\" slot=\"left\" icon=\"back\">返回</mt-button>\n    </mt-header>\n    <div style=\"width: 100%;height: 50px;\"></div>\n    <!-- top -->\n    <div class=\"top-flex-time \">\n      <div class=\"font13 \" style=\"width: 100%!important; text-align: center;\">剩余时间</div>\n      <div class=\"column time-abs-flex self\">\n        <div class=\"font30 self\" style=\"width: 100%!important; text-align: center;padding-left:0;font-size: 40px;\">\n          <span>{{d}}</span>\n          <span style=\"font-size: 12px!important;\">天</span>\n          <span>{{h}}</span>\n          <span style=\"font-size: 12px!important;\">小时</span>\n          <span style=\"margin-left:10px!important;\">{{m}}</span>\n          <span style=\"font-size: 12px!important;\">分</span>\n        </div>\n        <!--<div class=\"abso-font-flex row self_bottom itself\"  style=\"width: 100%!important; text-align: center;display:block;\">\n          <span>D</span><span>H</span><span>M</span>\n        </div>-->\n      </div>\n      <div class=\"two-self\">\n        <div>\n          <p>承租AP</p>\n          <p>{{count}}次</p>\n        </div>\n        <div>\n\n        </div>\n      </div>\n    </div>\n    <!-- 2 -->\n    <div class=\"main-content-class\">\n      <!-- 承租AP -->\n      <div class=\"row flex-box-center padding-top-view\">\n        <div>承租AP数量</div>\n      </div>\n      <div>\n        <input style=\"width: 100%;\"  @input=\"getAP\" v-model.trim=\"APNumber\" type=\"number\" placeholder=\"您当前等级可承租AP数量为1个到10个\"/>\n      </div>\n    </div>\n    <!-- 3 -->\n    <div class=\"main-content-class\">\n      <div class=\"row flex-box-center padding-top-view\">\n        <div>对应支付金额</div>\n      </div>\n      <div>\n        ￥{{cash * APNumber | yuan}}\n      </div>\n    </div>\n    <!-- 4 -->\n    <div class=\"main-content-class\">\n      <div class=\"row flex-box-center padding-top-view\">\n        <div>输入安全密码</div>\n      </div>\n      <div>\n        <input style=\"width: 100%;\" type=\"password\" v-model.trim=\"safePwd\" placeholder=\"\"/>\n      </div>\n    </div>\n    <!-- btn -->\n    <div class=\"btn-last-view\">\n      <div class=\"btn-save-flex\" @click=\"submit\">{{flag?\"提交\":\"正在处理中...\"}}</div>\n    </div>\n  </div>\n</template>\n<script>\n  import TostUtil from './../common/tostUtil';\n  import Util from './../common/util';\n  export default{\n    data () {\n      return {\n        time: '00:00:00',//距离下次播种剩余时间\n        APNumber: '',//AP数量\n        cash: 2000,//AP价格\n        count:0,\n        h: '00',\n        m: '00',\n        flag:true,\n        d: '00',\n        safePwd: '',//安全密码\n        endTime: '2019/04/15 12:00:00'//倒计时结束时间     //在ios中,ios不认‘-’，时间不能转化成毫秒，会显示 NAN，所以要用“/”代替\n      }\n    },\n    filters: {\n      yuan: function (value) {\n        return isNaN(value) ? 0.00 : parseFloat((value).toFixed(2)).toFixed(2);\n      }\n    },\n    computed: {},\n    methods: {\n      goBack(){\n        this.$router.go('-1')\n      },\n      num (n) {\n        return n < 10 ? \"0\" + n : \"\" + n;\n      },\n      getAP(){\n        if (this.APNumber < 1) {\n          TostUtil.tostTop('最少承租1AP！');\n          return false;\n        }\n        if (this.APNumber > 10) {\n          TostUtil.tostTop('单次承租数量不能大于10个！');\n          return false;\n        }\n\n      },\n      buy(){\n        let that = this;\n        if (this.APNumber < 1) {\n          TostUtil.tostTop('最少承租1AP！');\n          that.flag=true;\n          return;\n        }\n        if (this.APNumber > 10) {\n          TostUtil.tostTop('单次承租数量不能大于10个！');\n          that.flag=true;\n          return;\n        }\n        Util.ajax.post('/api/order/buy',{\n          number:Number(parseFloat(this.APNumber).toFixed(2))\n        }).then(res1=>{\n          this.APNumber='';\n          TostUtil.tostTop(res1.data.message);\n          that.flag=true;\n        }).catch(err=>{\n          this.APNumber='';\n          that.flag=true;\n          TostUtil.tostTop('网络出错,请稍后重试!')\n        })\n      },\n      submit(){\n        let that = this;\n        if(this.flag){\n          this.flag = false;\n          if (this.safePwd === '') {\n            TostUtil.tostTop('请输入安全密码！');\n            this.flag=true;\n            return;\n          }\n          if (this.APNumber > 10) {\n            TostUtil.tostTop('单次承租数量不能大于10个！');\n            this.flag=true;\n            return;\n          }\n          if (((this.APNumber) % 0.25).toFixed(2) !== '0.00') {\n            TostUtil.tostTop('单次承租数量必须为0.25的整数倍！');\n            this.flag=true;\n            return;\n          }\n          Util.ajax.post('/api/member/verify_security', {//校验安全密码\n            password: this.safePwd\n          }).then(res => {\n            if (res.data.status === 200) {//安仔密码正确可以买入；\n              that.buy();\n            }else {//错误提示用户信息\n              that.$bus.$emit('loading', false);\n              TostUtil.tostTop(res.data.message);\n              that.flag=true;\n            }\n          }).catch(err => {\n            that.safePwd='';\n            that.flag=true;\n            that.$bus.$emit('loading', false);\n            TostUtil.tostTop('网络出错,请稍后重试!')\n          })\n        }\n      }\n    },\n    created(){\n      this.$bus.$emit('loading', true);\n      let that = this;\n      /*setTimeout(function () {\n        that.$bus.$emit('loading', false);\n      }, 600);*/\n      let cycle=240*60*60;//周期时间\n      let remain=0;\n      let activeTime = Number(JSON.parse(localStorage.loginInfo).activationTime);//激活时间\n      let endTime=((new Date().getTime())/1000-activeTime);//当前减去激活时间，得出到现在为止已经过去了多久时间；\n      if(endTime>cycle){\n        remain=cycle-endTime%cycle;\n      }else{\n        remain = cycle-endTime;\n      }\n      let d = Math.floor(remain / (60 * 60 * 24));\n      let h = Math.floor((remain - d * 24 * 60 * 60) / 3600);\n      let m = Math.floor((remain - d * 24 * 60 * 60 - h * 3600) / 60);\n      let dd=d.toString().split('');\n      dd=dd[dd.length-1];\n      if(h<10){\n        h='0'+h;\n      }\n      if(m<10){\n        m='0'+m;\n      }\n      that.d=dd;\n      that.h=h;\n      that.m=m;\n      Util.ajax.post('/api/order', {\n        start: 0,\n        length: 200,\n        status: 'finish',\n        type: 'buy'\n      }).then(res => {\n        if (res.data.status === 200) {\n          let arr=res.data.data.data;\n          let arr1=[];\n          let n = Math.floor((endTime/cycle));//计算出过去了几个周期，在进行新一周期时，上一周期买入的次数都将清零\n          //得到上最近一个周期结束时的时间\n          let end = activeTime+cycle*n;\n          //循环找到只要是在这个时间后买入buy的就放入arr1，从而计算出在本周期中买入了几次\n          arr.forEach((item,index)=>{\n            if(item.type==='buy'){\n              if(Number(item.payTime)>Number(end)){\n                arr1.push(item);\n              }\n            }\n          });\n          that.count=arr1.length;//从激活到现在已经买入成功次数//我要得到在一个周期的买入成功次数\n          that.$bus.$emit('loading', false);\n        }else{\n          this.$bus.$emit('loading', false);\n        }\n      }).catch(err => {\n        that.$bus.$emit('loading', false);\n        TostUtil.tostTop('网络出错,请稍后重试!')\n      })\n    }\n  }\n</script>\n<style scoped>\n  .self>span:nth-child(1){\n    margin-right: 10px;\n  }\n  /*.self>span:nth-child(2){\n    margin:0 10px;\n  }*/\n  .self>span:nth-child(3){\n    margin-left: 10px;\n  }\n\n  .itself>span:nth-child(2){\n    margin:0 65px;\n  }\n  .header {\n    background: #5D0E13;\n    height: 50px !important;\n    font-size: 18px !important;\n  }\n\n  .top-flex-time {\n    width: 100%;\n    padding: 10px 7%;\n    background: #5D0E13;\n    border-top: 1px solid #5D0E13;\n    color: #fff;\n    height: 200px;\n    position: relative;\n    box-sizing: border-box;\n  }\n  .two-self{\n    width:100%;\n    display:flex;\n    margin-top:10px;\n    justify-content: space-between;\n    align-items:center;\n  }\n  .two-self>div:first-child{\n    border-right:1px solid #fff;\n  }\n  .two-self p{\n    text-align: center;\n  }\n  .two-self>div{\n    width:50%;\n    height:50px;\n  }\n\n  .flex-justify-center {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .row {\n    display: flex;\n    flex-direction: row;\n  }\n\n  .width-flex-this {\n    width: 34%;\n    margin-bottom: 20px;\n  }\n\n  .font13 {\n    font-size: 14px !important;\n  }\n\n  .time-abs-flex {\n    position: relative;\n  }\n\n  .font30 {\n    font-size: 30px;\n    padding-left: 10%;\n  }\n\n  .column {\n    display: flex;\n    flex-direction: column;\n  }\n\n  .self > div {\n    width: 130px;\n  }\n\n  .row {\n    display: flex;\n    flex-direction: row;\n  }\n\n  div.self_bottom > div:nth-child(1) {\n    margin-left: 5px;\n  }\n\n  input {\n    width: 100%;\n    color: #000;\n    font-size: 13px;\n    -webkit-appearance: none;\n    background: transparent;\n    border: none;\n    outline: none;\n  }\n\n  .elish-flex-view {\n    margin-right: 36px;\n  }\n\n  .top-fixed-flex {\n    width: 86%;\n    padding: 10px 7%;\n    background: #fff;\n    color: #333;\n    border-bottom:1px solid #f7f7f7;\n  }\n\n  .padding-top-view {\n    padding-top: 10px;\n  }\n\n  .main-content-class {\n    width: 86%;\n    padding: 7px 7%;\n    background: #fff;\n    height: auto;\n    position: relative;\n    padding-bottom: 17px;\n    border-bottom: 1px solid #e7e7e7;\n  }\n\n  .flex-box-center {\n    display: flex;\n    align-items: center;\n  }\n\n  .btn-last-view {\n    width: 86%;\n    padding: 10px 7%;\n  }\n\n  .btn-save-flex {\n    width: 100%;\n    background: #5D0E13;\n    color: #ECC489;\n    text-align: center;\n    padding: 7px 0;\n    border-radius: 5px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Buy.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('mt-header',{staticClass:\"header\",attrs:{\"title\":\"承租AP\"}},[_c('mt-button',{attrs:{\"slot\":\"left\",\"icon\":\"back\"},on:{\"click\":_vm.goBack},slot:\"left\"},[_vm._v(\"返回\")])],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"50px\"}}),_vm._v(\" \"),_c('div',{staticClass:\"top-flex-time \"},[_c('div',{staticClass:\"font13 \",staticStyle:{\"width\":\"100%!important\",\"text-align\":\"center\"}},[_vm._v(\"剩余时间\")]),_vm._v(\" \"),_c('div',{staticClass:\"column time-abs-flex self\"},[_c('div',{staticClass:\"font30 self\",staticStyle:{\"width\":\"100%!important\",\"text-align\":\"center\",\"padding-left\":\"0\",\"font-size\":\"40px\"}},[_c('span',[_vm._v(_vm._s(_vm.d))]),_vm._v(\" \"),_c('span',{staticStyle:{\"font-size\":\"12px!important\"}},[_vm._v(\"天\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.h))]),_vm._v(\" \"),_c('span',{staticStyle:{\"font-size\":\"12px!important\"}},[_vm._v(\"小时\")]),_vm._v(\" \"),_c('span',{staticStyle:{\"margin-left\":\"10px!important\"}},[_vm._v(_vm._s(_vm.m))]),_vm._v(\" \"),_c('span',{staticStyle:{\"font-size\":\"12px!important\"}},[_vm._v(\"分\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"two-self\"},[_c('div',[_c('p',[_vm._v(\"承租AP\")]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.count)+\"次\")])]),_vm._v(\" \"),_c('div')])]),_vm._v(\" \"),_c('div',{staticClass:\"main-content-class\"},[_vm._m(0),_vm._v(\" \"),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.APNumber),expression:\"APNumber\",modifiers:{\"trim\":true}}],staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"number\",\"placeholder\":\"您当前等级可承租AP数量为1个到10个\"},domProps:{\"value\":(_vm.APNumber)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.APNumber=$event.target.value.trim()},_vm.getAP],\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"main-content-class\"},[_vm._m(1),_vm._v(\" \"),_c('div',[_vm._v(\"\\n      ￥\"+_vm._s(_vm._f(\"yuan\")(_vm.cash * _vm.APNumber))+\"\\n    \")])]),_vm._v(\" \"),_c('div',{staticClass:\"main-content-class\"},[_vm._m(2),_vm._v(\" \"),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.safePwd),expression:\"safePwd\",modifiers:{\"trim\":true}}],staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"password\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.safePwd)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.safePwd=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"btn-last-view\"},[_c('div',{staticClass:\"btn-save-flex\",on:{\"click\":_vm.submit}},[_vm._v(_vm._s(_vm.flag?\"提交\":\"正在处理中...\"))])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row flex-box-center padding-top-view\"},[_c('div',[_vm._v(\"承租AP数量\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row flex-box-center padding-top-view\"},[_c('div',[_vm._v(\"对应支付金额\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row flex-box-center padding-top-view\"},[_c('div',[_vm._v(\"输入安全密码\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0089b866\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Buy.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader?minimize!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0089b866\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Buy.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Buy.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Buy.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0089b866\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Buy.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0089b866\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Buy.vue\n// module id = null\n// module chunks = ","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?minimize!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0089b866\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Buy.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"73048974\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader!./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0089b866\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/Buy.vue\n// module id = wJTB\n// module chunks = 78"],"sourceRoot":""}