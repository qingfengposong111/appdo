webpackJsonp([31],{PdMi:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("buxQ"),o=a("s0MJ"),s=a("p0f0"),n=(a("GdEX"),{components:{MeScroll:s.a},data:function(){return{APNumber:0,choose:!1,times:0,flagTime:!1,pageSize:200,mescroll:null,mescrollDown:{callback:this.downCallback},mescrollUp:{callback:this.upCallback,page:{num:0,size:200},htmlNodata:'<p class="upwarp-nodata">-- 加载完成 --</p>'},dataList:[],id:null,minDay:0}},filters:{formatDate:function(t){var e=new Date(1e3*Number(t)),a=(e.getFullYear(),e.getMonth()+1),i=e.getDate(),o=e.getHours(),s=e.getMinutes(),n=e.getSeconds();return a=a<10?"0"+a:a,i=i<10?"0"+i:i,o=o<10?"0"+o:o,s=s<10?"0"+s:s,n=n<10?"0"+n:n,i},formatLeftDate:function(t){var e=t/1e3,a=Math.floor(e/3600);e-=60*a*60;var i=Math.floor(e/60);e-=60*i;var o=Math.floor(e);return" "+(a=a<10?"0"+a:a)+":"+(i=i<10?"0"+i:i)+":"+(o=o<10?"0"+o:o)}},methods:{goBack:function(){this.$router.go("-1")},mescrollInit:function(t){this.mescroll=t},upCallback:function(t){var e=this,a=t.num*e.pageSize;o.a.ajax.post("/api/seed",{start:a,length:t.size}).then(function(t){if(200===t.data.status)if(a<t.data.data.pager.totalNum){var i=[];t.data.data.data.forEach(function(t,e){"growing"===t.status&&"0"===t.harvestTime&&i.push(t)});null!=e.growTimer&&clearInterval(e.growTimer),e.growTimer=setInterval(function(){for(var t=0;t<i.length;t++){var a=i[t],o=1e3*Number(a.time);if(!a.hasOwnProperty("sowingTime")){var s=Date.now()-o;a.hasOwnProperty("flagTime")||(a.flagTime=!1),a.hasOwnProperty("count")||(a.count=Math.floor(s/864e5),a.count>=7&&a.number>0?a.flagTime=!0:a.flagTime=!1)}a.hasOwnProperty("total")||(a.total=(Number(a.number)+Number(a.harvestNumber)).toFixed(4))}e.dataList=i},1e3),e.dataList=e.dataList.concat(i);var o=e.dataList.length/e.mescrollUp.page.size,s=void 0;s=o<t.data.data.pager.totalNum,e.$nextTick(function(){e.mescroll.endSuccess(i.length,s)})}else e.mescroll.endSuccess(t.data.data.pager.totalNum,!1)}).catch(function(){return e.mescroll.endErr()})},downCallback:function(){var t=this;0==t.dataList.length?o.a.ajax.post("/api/seed",{start:0,length:t.mescrollUp.page.size}).then(function(e){if(200===e.data.status){var a=[];e.data.data.data.forEach(function(t,e){"growing"===t.status&&"0"===t.harvestTime&&a.push(t)});null!=t.growTimer&&clearInterval(t.growTimer),t.growTimer=setInterval(function(){for(var e=0;e<a.length;e++){var i=a[e],o=1e3*Number(i.time);if(!i.hasOwnProperty("sowingTime")){var s=Date.now()-o;i.hasOwnProperty("flagTime")||(i.flagTime=!1),i.hasOwnProperty("count")||(i.count=Math.floor(s/864e5),i.count>=7&&i.number>0?i.flagTime=!0:i.flagTime=!1)}i.hasOwnProperty("total")||(i.total=(Number(i.number)+Number(i.harvestNumber)).toFixed(4))}t.dataList=a},1e3),t.dataList=t.dataList.concat(a),t.mescroll.endSuccess()}}).catch(function(){return t.mescroll.endErr()}):t.mescroll.endSuccess()},toGet:function(t,e,a){this.id=a,e>=7&&t>0?this.choose=!0:t<=0?(i.a.tostTop("暂无分红中的AP！"),this.choose=!1):t<7&&i.a.tostTop("最低分红7天方可提取！")},toSunmission:function(){var t=this;o.a.ajax.post("/api/seed/harvest",{Id:this.id}).then(function(e){200===e.data.status&&t.$router.go("-1"),i.a.tostTop(e.data.message),t.choose=!t.choose})},toClose:function(){i.a.tostTop("已取消！"),this.choose=!this.choose}},created:function(){this.$bus.$emit("loading",!0);var t=this;setTimeout(function(){t.$bus.$emit("loading",!1)},1200)}}),l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mt-header",{staticClass:"header",attrs:{title:"分红中的AP"}},[a("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:t.goBack},slot:"left"},[t._v("返回")])],1),t._v(" "),a("div",{staticStyle:{width:"100%",height:"50px"}}),t._v(" "),a("div",{staticClass:"head-zw"}),t._v(" "),a("MeScroll",{ref:"mescroll",staticClass:"mescroll",attrs:{down:t.mescrollDown,up:t.mescrollUp},on:{init:t.mescrollInit}},t._l(t.dataList,function(e,i){return a("div",{key:i,staticClass:" single flex-box"},[a("div",{staticClass:"flex-1",staticStyle:{color:"#5d0e13"}},[t._v(t._s(e.total)+" AP")]),t._v(" "),a("div",{staticClass:"flex-1 font13 days-com-flex flex-box-center"},[t._v("分红天数:"+t._s(e.count)+"天")]),t._v(" "),a("div",{staticClass:"flex-1 flex-right "},[!e.flagTime||e.count<7?a("div",{staticClass:"btn-get-flex font13 flex-box-center empty",on:{click:function(a){return t.toGet(e.number,e.count,e.id)}}},[t._v("提取")]):e.count>=7&&e.flagTime?a("div",{staticClass:"btn-get-flex font13 flex-box-center permit",on:{click:function(a){return t.toGet(e.number,e.count,e.id)}}},[t._v("提取")]):t._e()])])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.choose,expression:"choose"}],staticClass:"popup"},[a("div",{staticClass:"popup-class-flex"},[a("div",{staticClass:"update-title-view"},[t._v("提取分红确认")]),t._v(" "),a("div",{staticClass:"version-flex-view"},[t._v("\n        提出分红会把同一时间所有分红全部提取，您确定提取吗？\n      ")]),t._v(" "),a("div",{staticClass:"update-btn-view flex-box"},[a("div",{staticClass:"flex-1 font13",on:{click:function(t){}}},[a("div",{staticClass:"save-flex-btn",on:{click:t.toSunmission}},[t._v("提交")])]),t._v(" "),a("div",{staticClass:"flex-1 font13 flex-right",on:{click:function(t){}}},[a("div",{staticClass:"del-flex-btn",on:{click:t.toClose}},[t._v("取消")])])])])])],1)},staticRenderFns:[]};var r=a("VU/8")(n,l,!1,function(t){a("iHxW")},"data-v-7d9a73bc",null);e.default=r.exports},iHxW:function(t,e,a){var i=a("pVTx");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("adadc1ca",i,!0,{})},pVTx:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".header[data-v-7d9a73bc]{background:#5d0e13;height:50px!important;font-size:18px!important}.main-content-view[data-v-7d9a73bc]{padding:7px 7%;background:#fff;color:#333;width:100%;height:30px;line-height:30px;padding:10px 20px;margin-bottom:10px;position:relative}.flex-box[data-v-7d9a73bc]{display:-webkit-box;display:-ms-flexbox;display:flex}.flex-1[data-v-7d9a73bc]{-webkit-box-flex:1;-ms-flex:1;flex:1;-ms-flex-wrap:wrap;flex-wrap:wrap}.days-com-flex[data-v-7d9a73bc]{border-left:1px solid #fff;padding-left:5%;height:20px}.font13[data-v-7d9a73bc]{font-size:14px!important}.flex-box-center[data-v-7d9a73bc]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.flex-right[data-v-7d9a73bc]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.btn-get-flex[data-v-7d9a73bc]{padding:5px 15px;border-radius:5px}.empty[data-v-7d9a73bc]{background:#ccc;color:#333}.permit[data-v-7d9a73bc]{background:#f1b048;color:#5d0e13}.popup[data-v-7d9a73bc]{width:100%;height:100%;background:rgba(0,0,0,.3);position:fixed;top:0;left:0}.popup-class-flex[data-v-7d9a73bc]{width:60%;height:auto;background:#5d0e13;border-radius:5px;position:absolute;left:20%;top:35%}.update-title-view[data-v-7d9a73bc]{color:#fff;font-size:16px;padding:5px 0;text-align:center}.version-flex-view[data-v-7d9a73bc]{color:#fff;font-size:13px;padding:5px 7%}.update-btn-view[data-v-7d9a73bc]{width:90%;padding:5px 5% 10px}.save-flex-btn[data-v-7d9a73bc]{background:#f1ca8f;color:#5d0e13;border-radius:5px;width:50%;padding:5px 0;text-align:center}.del-flex-btn[data-v-7d9a73bc]{background:#4d4d4d;color:#fff;border-radius:5px;width:50%;padding:5px 0;text-align:center}.single[data-v-7d9a73bc]{background:#fff;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box;padding:10px 20px}",""])}});
//# sourceMappingURL=31.d6754d0482ef4c38ffff.js.map